# links: fig-servicename:localcontaineralias

elasticsearch:
  #image: shentonfreude/elasticsearch:1.4.2
  build: elasticsearch
  volumes:
    - ./elasticsearch-data:/data
  ports:
    - "9200:9200"
    - "9300:9300"
  
kibana:
  build: kibana
  #image: shentonfreude/kibana:4b3
  ports:
    - "5601:5601"
    - "5602:5602"
  links:
    - elasticsearch:elasticsearch

# If either of these LogStashes are run, Kibana4 seems to find a 1.1.1
# version which is too old for Kibana4. I suspect LogStash causes an
# ElasticSearch to run which joins the conluster containing 1.4.2.

# logstash-1.4.2 built on certified OpenJDK JRE box, clean
logstash142:
  build: logstash142
  volumes:
    - ./logstash-logs:/logs
  links:
    - elasticsearch:elasticsearch

# # Built on Ubuntu with apt-get and such
# logstash:
#   #image: shentonfreude/logstash:1.4
#   build: logstash
#   volumes:
#     - ./hostlogs:/hostlogs
#   links:
#     - es:elasticsearch
